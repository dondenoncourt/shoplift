<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>The Shoplift :: Home</title>
	
	<meta name="description" content="The Shoplift" />
	<meta name="keywords" content="The Shoplift" />	
	<meta name="author" content="The Shoplift" />
	
  	<link rel="stylesheet" type="text/css" href="css/main.css" />
  <!--[if lt IE 9]>
	<link rel="stylesheet" type="text/css" href="css/ie.css" />
<![endif]-->

  	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js"></script>
  	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js"></script>
	<script src="js/jquery.mousewheel.min.3.0.6.js"></script>
	<script src="js/jquery.sbscroller.js"></script>
	<script src="js/jquery.scrollTo-min.js"></script>
	<script src="js/jquery.simplemodal.js"></script>
	<script src="js/sitefuncs.js"></script>

</head>
<body>
	<a id="top"></a>
	<div class="headWrap">
		<div class="header">
			<h1><a href="">The Shoplift</a></h1>
			<div class="navigation">
				<a class="logout" href="#">Sign Out</a>
				<ul class="mainNav">
					<li><a href="#">Add</a></li>
					<li><a href="#">Follow</a></li>
					<li><a href="#">Saved</a></li>
				</ul>
				<form action="#" class="search">
					<input type="text" class="text search" name="search" value="Search" /><input type="submit" name="submit" class="searchSubmit" />
				</form>
				<a href="#" class="profilePhoto"><img src="img/user-large-kelly.jpg" alt="Bio Photo" /></a>
			</div>
		</div>	<!-- End .header -->
	</div>	<!-- End .headWrap -->
	
	<div id="content">
            <div class="entryTemplate"> 
                <div class="entryHead">
                    <a href="#"><img src="img/REPLACE.jpg" width="70" height="70" alt="Bio Photo" /></a>
                    <p class="user"><a href="#">REPLACE</a><br/><span class="location">REPLACE</span></p>
                </div>
                <div class="productMain">
                    <div class="product">
                        <div class="productDetails">
                            <!-- note header text needs to be inserted before the break -->
                            <h2><br/><span class="productDescription">REPLACE</span></h2>
                            <div class="price">$REPLACE</div>
                            <ul class="actions">
                                <li><a href="#">Re-lift</a></li>
                                <li><a href="#">Save</a></li>
                                <li><a href="#" class="modal" data-modalType="share">Share</a></li>
                                <li><a href="#">Buy</a></li>
                            </ul>
                        </div>
                        <img src="img/REPLACE.jpg" alt="REPLACE" width="383" height="383" />
                    </div>
                    <div class="productMeta">
                        <div class="comment">
                            <p><span class="commentText">REPLACE</span></p>
                            <p><span class="commentDate">REPLACE</span></p>
                        </div>
                        <div class="add-tag">
                            <form action="#">
                                <img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/>
                                <input type="text" class="text" name="tag" value="Add a Tag" />
                                <input type="submit" name="submit" class="addSubmit" />
                            </form>
                        </div>
                        <div class="tags">
                            <div class="scrollWrap">
                                <ul class="tagList">
                                    <li><a href="#"><img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/></a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="productTattle"><a href="#" class="modal" data-modalType="flagItem">Flag Item</a> | <a href="#" class="modal" data-modalType="reportTag">Report a Tag</a></div>
                    </div>
                </div>
            </div>
            <!--
            -->
			<div class="entry">
				<div class="entryHead">
					<a href="#"><img src="img/user-large-kelly.jpg" width="70" height="70" alt="Bio Photo" /></a>
					<p class="user"><a href="#">Kelly Beall (temp left as sample)</a><br/><span class="location">New York, NY</span></p>
				</div>
				<div class="productMain">
					<div class="product">
						<div class="productDetails">
							<h2>Anthropologie<br/><span class="productDescription">red dress</span></h2>
							<div class="price">$XXX</div>
							<ul class="actions">
								<li><a href="#">Re-lift</a></li>
								<li><a href="#">Save</a></li>
								<li><a href="#" class="modal" data-modalType="share">Share</a></li>
								<li><a href="#">Buy</a></li>
							</ul>
						</div>
						<img src="img/product-large-dress.jpg" alt="dress" width="383" height="383" />
					</div>
					<div class="productMeta">
						<div class="comment">
							<p>Comment quis hendrerit et tation, facilisi vel duis commodo vulputate. Comment quis hendrerit et tation.</p>
							<p>3:00 on Friday</p>
						</div>
						<div class="add-tag">
							<form action="#">
								<img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/><input type="text" class="text" name="tag" value="Add a Tag" /><input type="submit" name="submit" class="addSubmit" />
							</form>
						</div>
						<div class="tags">
							<div class="scrollWrap">
								<ul class="tagList">
									<li><a href="#"><img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/>Lorem Ipsum Tag</a></li>
									<li><a href="#"><img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/>Lorem Ipsum Tag</a></li>
									<li><a href="#"><img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/>Lorem Ipsum Tag</a></li>
									<li><a href="#"><img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/>Lorem Ipsum Tag</a></li>
									<li><a href="#"><img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/>Lorem Ipsum Tag</a></li>
									<li><a href="#"><img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/>Lorem Ipsum Tag</a></li>
									<li><a href="#"><img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/>Lorem Ipsum Tag</a></li>
									<li><a href="#"><img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/>Lorem Ipsum Tag</a></li>
									<li><a href="#"><img src="img/global/user-thumb-holder.gif" alt="user-thumb-holder" width="25" height="25" class="user-tiny-thumb"/>Lorem Ipsum Tag</a></li>
								</ul>
							</div>
						</div>
						<div class="productTattle"><a href="#" class="modal" data-modalType="flagItem">Flag Item</a> | <a href="#" class="modal" data-modalType="reportTag">Report a Tag</a></div>
					</div>
				</div>
			</div>
		<div class="clear"></div>
	</div>	<!-- End #content -->
	<ul class="footer">
		<li class="first"><a href="#">Help</a></li>
		<li><a href="#">About</a></li>
		<li><a href="#">Buttons</a></li>
		<li><a href="#">Mobile</a></li>
		<li><a href="#">Blog</a></li>
		<li><a href="#">Terms</a></li>
		<li><a href="#">Privacy</a></li>
		<li><a href="#">Contact</a></li>
		<li class="last"><a href="#">Invite</a></li>
	</ul>
	<a href="#top" class="scrollTo">Scroll to Top</a>
	
	<div id="basic-modal-content"></div>
    <script>
    var timeline ;
    $.ajax({
        url:'timelines',
        type:'GET',
        dataType:'json',
        success:function(data) {
            timeline = data;
            initPage();
        },
        error:function(XMLHttpRequest,textStatus,errorThrown){}
    });

    var postCount = 0;
    var scrollCount = 0;
    var lastScrollTop = 0;
    var scrollHeight = $('div .entryTemplate').height()-300;

    // setup scroll counts and load first two entries
    function initPage() {
        postCount = timeline.timeline.length
        for (i = 0; i < 2; i++) {
            showPost(i);
            scrollCount++;
        }
    }
	$(window).scroll(function(){
		var scrolltop = $(window).scrollTop();
        if ((scrolltop - lastScrollTop > scrollHeight) && scrollCount < postCount ) {
            showPost(scrollCount);
            lastScrollTop = scrolltop;
            scrollCount++;
        }
	});
    function showPost(index) {
        console.log('showPost('+index+')');
        var post = timeline.timeline[index];
        var entry = $('div .entryTemplate');
        $('div .clear').before('<div class="entry">'+entry.html()+'</div>');
        $('div.entryHead p a').last().html(post.user.extract.full_name); 
        $('div.entryHead span.location').last().html(post.user.extract.hometown);
        if (post.hashtags_allowed) {
            for (iTag = 0; iTag < post.hashtags.length; iTag++) {
               var clone = $('div.entryTemplate ul.tagList li').clone();
               clone.appendTo('div.entry:last ul.tagList');
               clone.find('a').html(clone.find('a').html()+post.hashtags[iTag].value);
            }
            $('div.entry:last ul.tagList a:first').remove();
        } else {
            $('div.add-tag').last().remove();
            $('div.entry:last ul.tagList').remove();
        }
        $('div.comment p span.commentText').last().html(post.comment);
        $('div.comment p span.commentDate').last().html(post.created_at);
        $('div.price').last().html('$'+post.price);
        $('div.productDetails span.productDescription').last().html(post.description);
        var html = $('div.productDetails h2').last().html();
        $('div.productDetails h2').last().html(post.name+html);
    }
    </script>
</body>
</html>
